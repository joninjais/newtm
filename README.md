# NewTM - News Table System

ระบบจัดการข่าวแบบตารางสำหรับหน่วยงานราชการ อ้างอิงจากเว็บตัวอย่าง https://demo.dsite.in.th/ratchakarn6/home/

## คุณสมบัติ

- ✅ Custom Post Type สำหรับข่าว (newtm_news)
- ✅ Taxonomy หมวดหมู่ลำดับชั้น (newtm_category)
- ✅ Shortcode แสดงข่าวแบบตาราง 2 คอลัมน์ (วันที่ | หัวข้อ)
- ✅ แสดงข่าวจัดกลุ่มตามหมวดหมู่
- ✅ ปุ่ม "ดูทั้งหมด" สำหรับแต่ละหมวด
- ✅ Responsive Design
- ✅ UI/UX เรียบง่ายและใช้งานง่าย

## การติดตั้ง

1. อัปโหลดโฟลเดอร์ `newtm` ไปยัง `/wp-content/plugins/`
2. เข้า WordPress Admin → Plugins
3. ค้นหา "NewTM - News Table System"
4. คลิก "Activate"

## การใช้งาน Shortcode

### แสดงข่าวตามหมวดหมู่
```
[newtm_table category="ประกาศ" limit="5"]
```

**พารามิเตอร์:**
- `category` - Slug ของหมวดหมู่ (จำเป็น)
- `limit` - จำนวนข่าวที่แสดง (ค่าเริ่มต้น: ใช้ค่าจากหน้า ตั้งค่า)
- `title_length` - จำนวนตัวอักษรสูงสุดของหัวข้อ (ค่าเริ่มต้น: ใช้ค่าจากหน้า ตั้งค่า)
- `show_title` - แสดงชื่อหมวดหมู่ (true/false) ค่าเริ่มต้น: true

**ตัวอย่าง:**
```
[newtm_table category="ประกาศ" limit="10" show_title="true"]
[newtm_table category="กิจกรรม" limit="5"]
[newtm_table category="ประกาศ" title_length="80"]
[newtm_table category="ประกาศ" limit="0" title_length="0"]
```

### แสดงข่าวทั้งหมดจัดกลุ่มตามหมวดหมู่
```
[newtm_all_categories limit="5"]
```

## ตั้งค่าการแสดงผล (UI)

### ตั้งค่าทั่วไป (Global Settings)
ไปที่ WordPress Admin → ข่าวสาร → ตั้งค่า

- **จำนวนตัวอักษรสูงสุดของหัวข้อ** (ใช้เป็นค่าเริ่มต้นของ `title_length`)
- **จำนวนข่าวต่อหน้า** (ใช้เป็นค่าเริ่มต้นของ `limit`)

### ตั้งค่าแยกรายหมวดหมู่ (Per-Category Settings)
ไปที่ WordPress Admin → ข่าวสาร → หมวดหมู่ → แก้ไขหมวดหมู่

แต่ละหมวดหมู่สามารถตั้งค่าเป็นของตัวเองได้:
- **จำนวนตัวอักษรสูงสุดของหัวข้อ** - ใช้สำหรับหมวดหมู่นี้เท่านั้น
- **จำนวนข่าวต่อหน้า** - ใช้สำหรับหมวดหมู่นี้เท่านั้น
- **จำนวนตัวอักษรสูงสุดของเนื้อหาย่อ** - สำหรับการแสดงผลเนื้อหาย่อ

**ลำดับการใช้ค่า:**
1. ค่าจากตัวพารามิเตอร์ shortcode (เช่น `limit="10"`)
2. ค่าจากการตั้งค่าของหมวดหมู่ (ถ้าได้ตั้งค่าไว้)
3. ค่าจากตั้งค่าทั่วไป (Global Settings)

**หมายเหตุ:** 
- ใส่ `0` = ไม่จำกัด หรือใช้ค่าเริ่มต้นจากระดับต่ำกว่า
- หากตั้งค่าในหมวดหมู่ที่เป็นตัวเลขมากกว่า 0 จะใช้ค่านั้นแทน

## โครงสร้างไฟล์

```
newtm/
├── newtm.php                    # ไฟล์หลักของ Plugin
├── includes/
│   ├── class-post-type.php      # Custom Post Type
│   ├── class-taxonomy.php       # Taxonomy
│   └── class-shortcodes.php     # Shortcodes
└── assets/
    ├── public.css               # Frontend Styles
    ├── public.js                # Frontend Scripts
    ├── admin.css                # Admin Styles
    └── admin.js                 # Admin Scripts
```

## วิธีสร้างข่าว

1. ไปที่ WordPress Admin → ข่าวสาร
2. คลิก "Add New"
3. กรอก:
   - **Title** - หัวข้อข่าว
   - **Content** - เนื้อหาข่าว
   - **Category** - เลือกหมวดหมู่
   - **Featured Image** - รูปภาพประกอบ (ถ้ามี)
4. คลิก "Publish"

## การดูข่าว

### หน้ารวมข่าวทั้งหมด
- **URL:** `/news/` หรือ `/newtm_news/` (ขึ้นอยู่กับ permalink settings)
- **รูปแบบการแสดงผล:** รายการข่าวแบบ List
- **ข้อมูลที่แสดง:** รูปภาพประกอบ, หมวดหมู่, วันที่, หัวข้อ, บรรยายสั้น

### หน้าแสดงข่าวตามหมวดหมู่
- **URL:** `/news-category/[slug]/` เช่น `/news-category/ประกาศ/`
- **รูปแบบการแสดงผล:** รายการข่าวแบบ List ที่ได้กรองตามหมวดหมู่
- **Pagination:** แสดงการแบ่งหน้าอัตโนมัติ

### หน้าแสดงข่าวเดี่ยว
- **URL:** `/newtm_news/[post-name]/`
- **รูปแบบการแสดงผล:** เนื้อหาข่าวแบบเต็ม
- **ข้อมูลที่แสดง:** รูปภาพประกอบ, หมวดหมู่, แท็ก, วันที่, เนื้อหาเต็มด้วย

## Slug ของหมวดหมู่

หลังจากสร้างหมวดหมู่ ให้คัดลอก slug เพื่อใช้ใน shortcode:
- เช่น ชื่อหมวดหมู่: "ข่าวประชาสัมพันธ์" → slug: "ข่าวประชาสัมพันธ์" (หรือกำหนดเอง)

## ข้อแนะนำ

- สร้างหมวดหมู่ก่อนสร้างข่าว
- ใช้ slug ภาษาอังกฤษถ้าเป็นไปได้ (เพื่อประสิทธิภาพ)
- เพิ่มรูปภาพประกอบข่าวเพื่อให้น่าสนใจ
- ใส่ shortcode ลงในหน้า/บทความเพื่อแสดงข่าว

## License

GPL v2 or later
